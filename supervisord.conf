[supervisord]
nodaemon=true
user=root

[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
autostart=true
autorestart=true

# 项目 1: Edge TTS
# 该项目默认监听 5050 端口
[program:edge-tts]
directory=/app/tts
command=python3 app.py
autostart=true
autorestart=true
environment=PORT=5050

# 项目 2: Doubao API
# 假设该项目可以通过环境变量修改端口，如果不可以，需要查看代码修改
# 这里我们假设它运行在 3000 端口（需要在 Nginx 里对应）
[program:doubao]
directory=/app/doubao
command=python3 app.py
autostart=true
autorestart=true
# 尝试通过环境变量设置端口，具体需看代码实现，如果代码写死端口，请修改 nginx.conf 对应的 upstream
environment=PORT=3000
